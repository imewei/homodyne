# ==============================================================================
# HOMODYNE STATIC ISOTROPIC CONFIGURATION
# ==============================================================================
# Optimized for static isotropic systems
#
# PARAMETER COUNT: 3 physical + 2 per angle
# Example: 3 angles → 3 + 2×3 = 9 total parameters
#
# Physical parameters:
#   - D₀: Initial diffusion coefficient [Å²/s]
#   - α: Power-law exponent [dimensionless]
#   - D_offset: Offset in diffusion [Å²/s]
#
# Per-angle scaling: [contrast, offset] for each phi angle
#
# VERSION: 2.0.0
# UPDATED: 2025-10-24
# ==============================================================================

# ==============================================================================
# EXPERIMENTAL DATA
# ==============================================================================
experimental_data:
  file_path: "./data/sample/experiment.hdf"

# ==============================================================================
# PARAMETER SPACE - Static Isotropic Model (3 Physical Parameters)
# ==============================================================================
parameter_space:
  model: "static_isotropic"

  bounds:
    # Diffusion coefficient D₀ [Å²/s]
    - name: D0
      min: 100.0
      max: 1e5

    # Anomalous exponent α [dimensionless]
    # 0 = normal diffusion, <1 = subdiffusion, >1 = superdiffusion
    - name: alpha
      min: 0.0
      max: 2.0

    # Diffusion offset D_offset [Å²/s]
    - name: D_offset
      min: -100.0
      max: 100.0

# ==============================================================================
# INITIAL PARAMETERS
# ==============================================================================
initial_parameters:
  # 3-parameter model: D₀, α, D_offset
  parameter_names:
    - D0
    - alpha
    - D_offset

# ==============================================================================
# OPTIMIZATION METHODS
# ==============================================================================
optimization:
  method: "nlsq"

  # NLSQ Trust-Region Solver
  nlsq:
    max_iterations: 100
    tolerance: 1e-8
    trust_region_scale: 1.0

  # MCMC Uncertainty Quantification
  mcmc:
    num_warmup: 1000
    num_samples: 2000
    num_chains: 4
    progress_bar: true
    backend: "numpyro"

  # Streaming Optimization (for large datasets >100M points)
  streaming:
    enable_checkpoints: true
    checkpoint_dir: "./checkpoints"
    checkpoint_frequency: 10
    resume_from_checkpoint: true
    keep_last_checkpoints: 3
    enable_fault_tolerance: true
    max_retries_per_batch: 2
    min_success_rate: 0.5

  # CMC for Large Multi-Angle Datasets (>1M points)
  cmc:
    enable: false
    backend: "jax"
    diagonal_correction: true

# ==============================================================================
# PHI ANGLE FILTERING (Optional)
# ==============================================================================
phi_filtering:
  enabled: false
  # Uncomment to enable angle filtering:
  # target_ranges:
  #   - min_angle: -10.0
  #     max_angle: 10.0
  #     description: "Near 0 degrees"

# ==============================================================================
# PERFORMANCE
# ==============================================================================
performance:
  strategy_override: null                 # Automatic strategy selection
  memory_limit_gb: null                   # Auto-detect
  enable_progress: true                   # Show progress bars

  device:
    preferred_device: "auto"              # Auto GPU/CPU selection
    gpu_memory_fraction: 0.9

# ==============================================================================
# VISUALIZATION
# ==============================================================================
plotting:
  save_plots: true
  show_plots: false
  format: "png"
  dpi: 300

# ==============================================================================
# LOGGING
# ==============================================================================
logging:
  level: "INFO"
  console_output: true
  file_output: true

# ==============================================================================
# OUTPUT
# ==============================================================================
output:
  directory: "./results"

# ==============================================================================
# USAGE NOTES
# ==============================================================================
#
# QUICK START:
# 1. Update experimental_data.file_path to your data file
# 2. Adjust parameter bounds if needed
# 3. Run: homodyne --config this_file.yaml --method nlsq
#
# PARAMETER GUIDANCE:
# - D₀: Typically 100-10000 for colloidal systems
# - α: Negative for subdiffusion (0 to -2), positive for superdiffusion (0 to 2)
# - D_offset: Usually small or zero
#
# OPTIMIZATION METHODS:
# - nlsq: Fast, deterministic (recommended for initial analysis)
# - mcmc: Slower, provides uncertainties (recommended for publication)
#
# DATASET SIZE HANDLING:
# - < 1M points: Automatic STANDARD strategy
# - 1M-10M: Automatic LARGE strategy
# - 10M-100M: Automatic CHUNKED strategy
# - > 100M: Automatic STREAMING strategy
#
# PARAMETER COUNT:
# - 3 physical parameters (D₀, α, D_offset)
# - + 2 scaling parameters per filtered phi angle (contrast, offset)
# - Total = 3 + 2 × (number of angles)
# - Example: 3 angles → 3 + 6 = 9 parameters
#
# PLATFORM SUPPORT:
# - CPU: Linux, macOS, Windows
# - GPU: Linux only (CUDA 12.1-12.9)
#
# ==============================================================================
