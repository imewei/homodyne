

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contributing Guide &mdash; Homodyne Analysis 6.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=66ead900" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=54d05895"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Migration Guide" href="migration_guide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980b9" >

          
          
          <a href="index.html" class="icon icon-home">
            Homodyne Analysis
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis_modes.html">Analysis Modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration System</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="optimization_methods.html">Optimization Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="scaling_optimization.html">Scaling Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Performance Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_validation.html">Data Validation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">homodyne</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing and Quality Assurance</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration_guide.html">Migration Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contributing Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#development-environment-setup">Development Environment Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#repository-structure">Repository Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#types-of-contributions">Types of Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bug-reports">Bug Reports</a></li>
<li class="toctree-l3"><a class="reference internal" href="#feature-requests">Feature Requests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation-improvements">Documentation Improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code-contributions">Code Contributions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#development-workflow">Development Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#git-workflow">Git Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#coding-standards">Coding Standards</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#testing-guidelines">Testing Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#test-categories">Test Categories</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-writing-best-practices">Test Writing Best Practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-tests-locally">Running Tests Locally</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#performance-considerations">Performance Considerations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#performance-guidelines">Performance Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#memory-management">Memory Management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#documentation-guidelines">Documentation Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#docstring-standards">Docstring Standards</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation-building">Documentation Building</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#review-process">Review Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pull-request-guidelines">Pull Request Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code-review-process">Code Review Process</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#release-process">Release Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#version-management">Version Management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#community-guidelines">Community Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#code-of-conduct">Code of Conduct</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-help">Getting Help</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#thank-you">Thank You</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980b9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Homodyne Analysis</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Contributing Guide</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="contributing-guide">
<h1>Contributing Guide<a class="headerlink" href="#contributing-guide" title="Link to this heading"></a></h1>
<p>We welcome contributions to the homodyne package! This guide provides comprehensive information for developers who want to contribute to the project, from bug reports to major feature additions.</p>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h2>
<section id="development-environment-setup">
<h3>Development Environment Setup<a class="headerlink" href="#development-environment-setup" title="Link to this heading"></a></h3>
<p><strong>1. Fork and Clone the Repository</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Fork the repository on GitHub, then clone your fork</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/your-username/homodyne-analysis.git
<span class="nb">cd</span><span class="w"> </span>homodyne-analysis
</pre></div>
</div>
<p><strong>2. Set Up Development Environment</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create development environment</span>
python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>dev_env
<span class="nb">source</span><span class="w"> </span>dev_env/bin/activate<span class="w">  </span><span class="c1"># On Windows: dev_env\Scripts\activate</span>

<span class="c1"># Install development dependencies</span>
pip<span class="w"> </span>install<span class="w"> </span>numpy<span class="w"> </span>scipy<span class="w"> </span>matplotlib<span class="w"> </span>numba
pip<span class="w"> </span>install<span class="w"> </span>pymc<span class="w"> </span>arviz<span class="w"> </span>pytensor<span class="w">  </span><span class="c1"># For MCMC features</span>
pip<span class="w"> </span>install<span class="w"> </span>pytest<span class="w"> </span>pytest-cov<span class="w">   </span><span class="c1"># For testing</span>
</pre></div>
</div>
<p><strong>3. Install Package in Development Mode</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install in editable mode</span>
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</pre></div>
</div>
<p><strong>4. Verify Installation</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run test suite to verify setup</span>
python<span class="w"> </span>homodyne/run_tests.py<span class="w"> </span>--fast
</pre></div>
</div>
</section>
<section id="repository-structure">
<h3>Repository Structure<a class="headerlink" href="#repository-structure" title="Link to this heading"></a></h3>
<p>Understanding the codebase organization:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>homodyne/
├── run_homodyne.py              # Main CLI entry point
├── create_config.py            # Configuration generator
├── benchmark_performance.py    # Performance benchmarking
├── homodyne/
│   ├── __init__.py             # Package exports
│   ├── plotting.py            # Visualization utilities
│   ├── run_tests.py          # Test runner
│   ├── core/                 # Core functionality
│   │   ├── config.py        # Configuration management
│   │   ├── kernels.py       # Computational kernels
│   │   └── io_utils.py      # Data I/O utilities
│   ├── analysis/            # Analysis engines
│   │   └── core.py         # Main analysis class
│   ├── optimization/        # Optimization methods
│   │   ├── classical.py    # Classical optimization
│   │   └── mcmc.py         # Bayesian MCMC
│   └── tests/              # Test suite
│       ├── conftest.py     # Test configuration
│       ├── fixtures.py     # Test fixtures
│       └── test_*.py       # Test modules
└── sphinx_docs/             # Documentation source
</pre></div>
</div>
</section>
</section>
<section id="types-of-contributions">
<h2>Types of Contributions<a class="headerlink" href="#types-of-contributions" title="Link to this heading"></a></h2>
<section id="bug-reports">
<h3>Bug Reports<a class="headerlink" href="#bug-reports" title="Link to this heading"></a></h3>
<p><strong>How to Report Bugs</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Search existing issues</strong> to avoid duplicates</p></li>
<li><p><strong>Use the bug report template</strong> with:
- Clear description of the problem
- Steps to reproduce
- Expected vs. actual behavior
- System information (OS, Python version, package versions)
- Configuration files (sanitized)
- Complete error tracebacks</p></li>
</ol>
<p><strong>Example Bug Report</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>**Bug Description**
MCMC sampling fails with R-hat convergence warnings on flow analysis

**Steps to Reproduce**
1. Use config_laminar_flow.json with default settings
2. Run: python run_homodyne.py --laminar-flow --method mcmc
3. MCMC completes but shows R-hat &gt; 1.1 warnings

**Expected Behavior**
MCMC should converge with R-hat &lt; 1.1

**System Information**
- Python 3.9.7
- NumPy 1.21.0
- PyMC 4.0.1
- macOS 12.0.1
</pre></div>
</div>
</section>
<section id="feature-requests">
<h3>Feature Requests<a class="headerlink" href="#feature-requests" title="Link to this heading"></a></h3>
<p><strong>How to Request Features</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Check existing feature requests</strong> and roadmap</p></li>
<li><p><strong>Provide clear justification</strong> for the feature</p></li>
<li><p><strong>Describe the use case</strong> and expected benefits</p></li>
<li><p><strong>Consider implementation complexity</strong> and backwards compatibility</p></li>
</ol>
<p><strong>Example Feature Request</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>**Feature Request: GPU Acceleration Support**

**Use Case**
Large-scale XPCS datasets (&gt;10GB) would benefit from GPU acceleration

**Proposed Implementation**
- CuPy backend for NumPy operations
- GPU-accelerated correlation function calculation
- Optional dependency with CPU fallback

**Benefits**
- 10-100x speedup for large datasets
- Better scalability for high-throughput analysis
</pre></div>
</div>
</section>
<section id="documentation-improvements">
<h3>Documentation Improvements<a class="headerlink" href="#documentation-improvements" title="Link to this heading"></a></h3>
<p><strong>Types of Documentation Contributions</strong>:</p>
<ul class="simple">
<li><p><strong>Tutorial improvements</strong>: Clearer explanations, more examples</p></li>
<li><p><strong>API documentation</strong>: Better docstrings, parameter descriptions</p></li>
<li><p><strong>Troubleshooting guides</strong>: Solutions to common problems</p></li>
<li><p><strong>Performance guides</strong>: Optimization tips and best practices</p></li>
</ul>
<p><strong>Documentation Standards</strong>:</p>
<ul class="simple">
<li><p>Use reStructuredText (RST) format</p></li>
<li><p>Follow existing style and organization</p></li>
<li><p>Include code examples with expected output</p></li>
<li><p>Test all code examples before submission</p></li>
</ul>
</section>
<section id="code-contributions">
<h3>Code Contributions<a class="headerlink" href="#code-contributions" title="Link to this heading"></a></h3>
<p><strong>Types of Code Contributions</strong>:</p>
<ul class="simple">
<li><p><strong>Bug fixes</strong>: Resolve identified issues</p></li>
<li><p><strong>Performance improvements</strong>: Optimize algorithms or implementations</p></li>
<li><p><strong>New features</strong>: Add functionality following project design patterns</p></li>
<li><p><strong>Test improvements</strong>: Increase coverage or test quality</p></li>
</ul>
</section>
</section>
<section id="development-workflow">
<h2>Development Workflow<a class="headerlink" href="#development-workflow" title="Link to this heading"></a></h2>
<section id="git-workflow">
<h3>Git Workflow<a class="headerlink" href="#git-workflow" title="Link to this heading"></a></h3>
<p><strong>1. Create Feature Branch</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Update main branch</span>
git<span class="w"> </span>checkout<span class="w"> </span>main
git<span class="w"> </span>pull<span class="w"> </span>upstream<span class="w"> </span>main

<span class="c1"># Create feature branch</span>
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>feature/your-feature-name
</pre></div>
</div>
<p><strong>2. Make Changes</strong></p>
<ul class="simple">
<li><p>Write code following project conventions</p></li>
<li><p>Add tests for new functionality</p></li>
<li><p>Update documentation as needed</p></li>
<li><p>Commit changes with clear messages</p></li>
</ul>
<p><strong>3. Test Changes</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run full test suite</span>
python<span class="w"> </span>homodyne/run_tests.py

<span class="c1"># Run tests with coverage</span>
python<span class="w"> </span>homodyne/run_tests.py<span class="w"> </span>--coverage

<span class="c1"># Test specific functionality</span>
python<span class="w"> </span>homodyne/run_tests.py<span class="w"> </span>-k<span class="w"> </span><span class="s2">&quot;your_test_pattern&quot;</span>
</pre></div>
</div>
<p><strong>4. Submit Pull Request</strong></p>
<ul class="simple">
<li><p>Push branch to your fork</p></li>
<li><p>Create pull request with clear description</p></li>
<li><p>Link to related issues</p></li>
<li><p>Request code review</p></li>
</ul>
</section>
<section id="coding-standards">
<h3>Coding Standards<a class="headerlink" href="#coding-standards" title="Link to this heading"></a></h3>
<p><strong>Python Style Guide</strong>:</p>
<ul class="simple">
<li><p>Follow PEP 8 with line length limit of 100 characters</p></li>
<li><p>Use type hints for function signatures</p></li>
<li><p>Write comprehensive docstrings (NumPy style)</p></li>
</ul>
<p><strong>Code Quality</strong>:</p>
<ul class="simple">
<li><p>Maintain backwards compatibility when possible</p></li>
<li><p>Write unit tests for new functionality</p></li>
<li><p>Use meaningful variable and function names</p></li>
<li><p>Add comments for complex algorithms</p></li>
</ul>
<p><strong>Example Code Style</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">compute_correlation_function</span><span class="p">(</span>
    <span class="n">experimental_data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">time_points</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">use_numba</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute theoretical correlation function g1(t1, t2).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    experimental_data : np.ndarray</span>
<span class="sd">        Experimental correlation data g2(t1, t2)</span>
<span class="sd">    parameters : Dict[str, float]</span>
<span class="sd">        Physical parameters for the model</span>
<span class="sd">    time_points : np.ndarray</span>
<span class="sd">        Time points for correlation function</span>
<span class="sd">    use_numba : bool, optional</span>
<span class="sd">        Enable Numba JIT compilation (default: True)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        Theoretical correlation function g1(t1, t2)</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; params = {&#39;D0&#39;: 1e-12, &#39;alpha&#39;: 1.0}</span>
<span class="sd">    &gt;&gt;&gt; times = np.linspace(0, 1, 100)</span>
<span class="sd">    &gt;&gt;&gt; g1 = compute_correlation_function(data, params, times)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Implementation here</span>
    <span class="k">pass</span>
</pre></div>
</div>
</section>
</section>
<section id="testing-guidelines">
<h2>Testing Guidelines<a class="headerlink" href="#testing-guidelines" title="Link to this heading"></a></h2>
<section id="test-categories">
<h3>Test Categories<a class="headerlink" href="#test-categories" title="Link to this heading"></a></h3>
<p><strong>Unit Tests</strong>: Test individual functions and classes</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_parameter_validation</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test parameter validation in configuration loading.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;Invalid parameter value&quot;</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">ConfigManager</span><span class="p">(</span><span class="n">invalid_config_path</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Integration Tests</strong>: Test complete workflows</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_complete_analysis_workflow</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test end-to-end analysis pipeline.&quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">create_test_config</span><span class="p">()</span>
    <span class="n">analysis</span> <span class="o">=</span> <span class="n">HomodyneAnalysisCore</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">optimize_classical</span><span class="p">()</span>

    <span class="k">assert</span> <span class="n">results</span><span class="o">.</span><span class="n">success</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_active_parameters</span><span class="p">())</span>
</pre></div>
</div>
<p><strong>Performance Tests</strong>: Verify performance requirements</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_numba_performance</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test that Numba provides expected speedup.&quot;&quot;&quot;</span>
    <span class="n">config_no_numba</span> <span class="o">=</span> <span class="n">create_config</span><span class="p">(</span><span class="n">use_numba_jit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">config_with_numba</span> <span class="o">=</span> <span class="n">create_config</span><span class="p">(</span><span class="n">use_numba_jit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">time_no_numba</span> <span class="o">=</span> <span class="n">benchmark_analysis</span><span class="p">(</span><span class="n">config_no_numba</span><span class="p">)</span>
    <span class="n">time_with_numba</span> <span class="o">=</span> <span class="n">benchmark_analysis</span><span class="p">(</span><span class="n">config_with_numba</span><span class="p">)</span>

    <span class="n">speedup</span> <span class="o">=</span> <span class="n">time_no_numba</span> <span class="o">/</span> <span class="n">time_with_numba</span>
    <span class="k">assert</span> <span class="n">speedup</span> <span class="o">&gt;</span> <span class="mf">2.0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Insufficient speedup: </span><span class="si">{</span><span class="n">speedup</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">x&quot;</span>
</pre></div>
</div>
</section>
<section id="test-writing-best-practices">
<h3>Test Writing Best Practices<a class="headerlink" href="#test-writing-best-practices" title="Link to this heading"></a></h3>
<p><strong>Test Structure</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_feature_description</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clear description of what is being tested.&quot;&quot;&quot;</span>

    <span class="c1"># Arrange: Set up test conditions</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">create_test_config</span><span class="p">()</span>
    <span class="n">expected_result</span> <span class="o">=</span> <span class="n">calculate_expected_result</span><span class="p">()</span>

    <span class="c1"># Act: Execute the functionality</span>
    <span class="n">analysis</span> <span class="o">=</span> <span class="n">HomodyneAnalysisCore</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="n">actual_result</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">method_under_test</span><span class="p">()</span>

    <span class="c1"># Assert: Verify correctness</span>
    <span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_allclose</span><span class="p">(</span>
        <span class="n">actual_result</span><span class="p">,</span> <span class="n">expected_result</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span>
        <span class="n">err_msg</span><span class="o">=</span><span class="s2">&quot;Method produces incorrect results&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<p><strong>Test Coverage Requirements</strong>:</p>
<ul class="simple">
<li><p>New code must have ≥80% test coverage</p></li>
<li><p>Critical computational kernels must have ≥95% coverage</p></li>
<li><p>All public API methods must have 100% coverage</p></li>
</ul>
</section>
<section id="running-tests-locally">
<h3>Running Tests Locally<a class="headerlink" href="#running-tests-locally" title="Link to this heading"></a></h3>
<p><strong>Basic Test Execution</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run all tests</span>
python<span class="w"> </span>homodyne/run_tests.py

<span class="c1"># Run fast tests only</span>
python<span class="w"> </span>homodyne/run_tests.py<span class="w"> </span>--fast

<span class="c1"># Run with verbose output</span>
python<span class="w"> </span>homodyne/run_tests.py<span class="w"> </span>--verbose
</pre></div>
</div>
<p><strong>Advanced Testing</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run with coverage reporting</span>
python<span class="w"> </span>homodyne/run_tests.py<span class="w"> </span>--coverage

<span class="c1"># Run specific test patterns</span>
python<span class="w"> </span>homodyne/run_tests.py<span class="w"> </span>-k<span class="w"> </span><span class="s2">&quot;test_config&quot;</span>

<span class="c1"># Run parallel tests</span>
python<span class="w"> </span>homodyne/run_tests.py<span class="w"> </span>--parallel<span class="w"> </span><span class="m">4</span>
</pre></div>
</div>
</section>
</section>
<section id="performance-considerations">
<h2>Performance Considerations<a class="headerlink" href="#performance-considerations" title="Link to this heading"></a></h2>
<section id="performance-guidelines">
<h3>Performance Guidelines<a class="headerlink" href="#performance-guidelines" title="Link to this heading"></a></h3>
<p><strong>Computational Efficiency</strong>:</p>
<ul class="simple">
<li><p>Use NumPy vectorized operations</p></li>
<li><p>Enable Numba JIT compilation for computational kernels</p></li>
<li><p>Profile code to identify bottlenecks</p></li>
<li><p>Consider memory usage for large datasets</p></li>
</ul>
<p><strong>Example Optimized Code</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">numba</span><span class="w"> </span><span class="kn">import</span> <span class="n">jit</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="nd">@jit</span><span class="p">(</span><span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">compute_chi_squared_optimized</span><span class="p">(</span><span class="n">experimental</span><span class="p">,</span> <span class="n">theoretical</span><span class="p">,</span> <span class="n">uncertainties</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Numba-optimized chi-squared calculation.&quot;&quot;&quot;</span>
    <span class="n">chi_sq</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">experimental</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="n">experimental</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">theoretical</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">chi_sq</span> <span class="o">+=</span> <span class="p">(</span><span class="n">diff</span> <span class="o">/</span> <span class="n">uncertainties</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">**</span> <span class="mi">2</span>

    <span class="k">return</span> <span class="n">chi_sq</span>
</pre></div>
</div>
<p><strong>Performance Testing</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_performance_regression</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure no performance regression in core algorithms.&quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">create_large_dataset_config</span><span class="p">()</span>
    <span class="n">analysis</span> <span class="o">=</span> <span class="n">HomodyneAnalysisCore</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">analysis</span><span class="o">.</span><span class="n">optimize_classical</span><span class="p">()</span>
    <span class="n">execution_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>

    <span class="c1"># Should complete within reasonable time</span>
    <span class="k">assert</span> <span class="n">execution_time</span> <span class="o">&lt;</span> <span class="n">MAX_EXECUTION_TIME</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Performance regression: </span><span class="si">{</span><span class="n">execution_time</span><span class="si">}</span><span class="s2">s&quot;</span>
</pre></div>
</div>
</section>
<section id="memory-management">
<h3>Memory Management<a class="headerlink" href="#memory-management" title="Link to this heading"></a></h3>
<p><strong>Guidelines</strong>:</p>
<ul class="simple">
<li><p>Use appropriate data types (float32 vs float64)</p></li>
<li><p>Implement chunked processing for large datasets</p></li>
<li><p>Monitor memory usage in tests</p></li>
<li><p>Provide memory limit configuration options</p></li>
</ul>
<p><strong>Example Memory-Efficient Code</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">process_large_dataset</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">memory_limit_gb</span><span class="o">=</span><span class="mi">16</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Process large dataset in chunks to manage memory usage.&quot;&quot;&quot;</span>
    <span class="n">memory_limit_bytes</span> <span class="o">=</span> <span class="n">memory_limit_gb</span> <span class="o">*</span> <span class="mi">1024</span><span class="o">**</span><span class="mi">3</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">chunk_size</span><span class="p">):</span>
        <span class="n">chunk</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="n">chunk_size</span><span class="p">]</span>

        <span class="c1"># Monitor memory usage</span>
        <span class="n">current_memory</span> <span class="o">=</span> <span class="n">get_memory_usage</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">current_memory</span> <span class="o">&gt;</span> <span class="n">memory_limit_bytes</span><span class="p">:</span>
            <span class="c1"># Reduce chunk size or implement other memory management</span>
            <span class="k">pass</span>

        <span class="c1"># Process chunk</span>
        <span class="n">result_chunk</span> <span class="o">=</span> <span class="n">process_chunk</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">result_chunk</span>
</pre></div>
</div>
</section>
</section>
<section id="documentation-guidelines">
<h2>Documentation Guidelines<a class="headerlink" href="#documentation-guidelines" title="Link to this heading"></a></h2>
<section id="docstring-standards">
<h3>Docstring Standards<a class="headerlink" href="#docstring-standards" title="Link to this heading"></a></h3>
<p>Use NumPy-style docstrings for all public functions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">analyze_correlation_data</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">ConfigManager</span><span class="p">,</span>
    <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;classical&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnalysisResults</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze experimental correlation data using specified method.</span>

<span class="sd">    This function performs comprehensive analysis of XPCS correlation</span>
<span class="sd">    data using either classical optimization or Bayesian MCMC sampling.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : np.ndarray</span>
<span class="sd">        Experimental correlation function g2(t1, t2) data</span>
<span class="sd">    config : ConfigManager</span>
<span class="sd">        Configuration object containing analysis parameters</span>
<span class="sd">    method : str, optional</span>
<span class="sd">        Analysis method (&quot;classical&quot;, &quot;mcmc&quot;, or &quot;all&quot;), default &quot;classical&quot;</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    AnalysisResults</span>
<span class="sd">        Object containing optimized parameters, goodness-of-fit statistics,</span>
<span class="sd">        and uncertainty estimates (for MCMC methods)</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If data format is invalid or method is not recognized</span>
<span class="sd">    ConvergenceError</span>
<span class="sd">        If optimization fails to converge</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; config = ConfigManager(&quot;analysis_config.json&quot;)</span>
<span class="sd">    &gt;&gt;&gt; results = analyze_correlation_data(experimental_data, config)</span>
<span class="sd">    &gt;&gt;&gt; print(f&quot;Optimized D0: {results.parameters[&#39;D0&#39;]:.2e}&quot;)</span>
<span class="sd">    Optimized D0: 1.23e-12</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The classical method uses Nelder-Mead simplex optimization, while</span>
<span class="sd">    MCMC employs NUTS sampling with automatic parameter tuning.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] He et al., &quot;Transport coefficient approach for characterizing</span>
<span class="sd">           nonequilibrium dynamics in soft matter,&quot; PNAS 2024.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
</section>
<section id="documentation-building">
<h3>Documentation Building<a class="headerlink" href="#documentation-building" title="Link to this heading"></a></h3>
<p><strong>Build Documentation Locally</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install Sphinx and dependencies</span>
pip<span class="w"> </span>install<span class="w"> </span>sphinx<span class="w"> </span>sphinx-rtd-theme<span class="w"> </span>myst-parser

<span class="c1"># Build HTML documentation</span>
<span class="nb">cd</span><span class="w"> </span>sphinx_docs
make<span class="w"> </span>html

<span class="c1"># View documentation</span>
open<span class="w"> </span>_build/html/index.html<span class="w">  </span><span class="c1"># On macOS</span>
<span class="c1"># Or navigate to _build/html/index.html in your browser</span>
</pre></div>
</div>
<p><strong>Documentation Structure</strong>:</p>
<ul class="simple">
<li><p><strong>User Guide</strong>: Installation, quickstart, usage examples</p></li>
<li><p><strong>Advanced Topics</strong>: Performance optimization, scaling theory</p></li>
<li><p><strong>API Reference</strong>: Complete function and class documentation</p></li>
<li><p><strong>Developer Guide</strong>: Contributing guidelines, testing, troubleshooting</p></li>
</ul>
</section>
</section>
<section id="review-process">
<h2>Review Process<a class="headerlink" href="#review-process" title="Link to this heading"></a></h2>
<section id="pull-request-guidelines">
<h3>Pull Request Guidelines<a class="headerlink" href="#pull-request-guidelines" title="Link to this heading"></a></h3>
<p><strong>Before Submitting</strong>:</p>
<ul class="simple">
<li><p>[ ] Code follows project style guidelines</p></li>
<li><p>[ ] All tests pass locally</p></li>
<li><p>[ ] New functionality has adequate test coverage</p></li>
<li><p>[ ] Documentation is updated appropriately</p></li>
<li><p>[ ] Performance impact is assessed</p></li>
<li><p>[ ] Backwards compatibility is maintained</p></li>
</ul>
<p><strong>Pull Request Template</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>## Description
Brief description of changes and motivation

## Type of Change
- [ ] Bug fix (non-breaking change that fixes an issue)
- [ ] New feature (non-breaking change that adds functionality)
- [ ] Breaking change (change that would cause existing functionality to not work as expected)
- [ ] Documentation update

## Testing
- [ ] New tests added for new functionality
- [ ] All existing tests pass
- [ ] Performance impact assessed

## Checklist
- [ ] Code follows style guidelines
- [ ] Self-review completed
- [ ] Documentation updated
- [ ] Breaking changes documented
</pre></div>
</div>
</section>
<section id="code-review-process">
<h3>Code Review Process<a class="headerlink" href="#code-review-process" title="Link to this heading"></a></h3>
<p><strong>Review Criteria</strong>:</p>
<ul class="simple">
<li><p><strong>Correctness</strong>: Code works as intended</p></li>
<li><p><strong>Style</strong>: Follows project conventions</p></li>
<li><p><strong>Tests</strong>: Adequate coverage and quality</p></li>
<li><p><strong>Documentation</strong>: Clear and complete</p></li>
<li><p><strong>Performance</strong>: No significant regressions</p></li>
</ul>
<p><strong>Reviewer Guidelines</strong>:</p>
<ul class="simple">
<li><p>Provide constructive feedback</p></li>
<li><p>Explain reasoning behind suggestions</p></li>
<li><p>Test changes locally when necessary</p></li>
<li><p>Approve when all criteria are met</p></li>
</ul>
</section>
</section>
<section id="release-process">
<h2>Release Process<a class="headerlink" href="#release-process" title="Link to this heading"></a></h2>
<section id="version-management">
<h3>Version Management<a class="headerlink" href="#version-management" title="Link to this heading"></a></h3>
<p><strong>Semantic Versioning</strong>:</p>
<ul class="simple">
<li><p><strong>Major</strong>: Breaking changes (X.0.0)</p></li>
<li><p><strong>Minor</strong>: New features, backwards compatible (0.X.0)</p></li>
<li><p><strong>Patch</strong>: Bug fixes, backwards compatible (0.0.X)</p></li>
</ul>
<p><strong>Release Checklist</strong>:</p>
<ul class="simple">
<li><p>[ ] All tests pass</p></li>
<li><p>[ ] Documentation updated</p></li>
<li><p>[ ] Performance benchmarks run</p></li>
<li><p>[ ] Migration guide updated (for major releases)</p></li>
<li><p>[ ] Release notes prepared</p></li>
</ul>
</section>
</section>
<section id="community-guidelines">
<h2>Community Guidelines<a class="headerlink" href="#community-guidelines" title="Link to this heading"></a></h2>
<section id="code-of-conduct">
<h3>Code of Conduct<a class="headerlink" href="#code-of-conduct" title="Link to this heading"></a></h3>
<p><strong>Our Commitment</strong>:</p>
<ul class="simple">
<li><p>Foster an open and welcoming environment</p></li>
<li><p>Respect all contributors regardless of background</p></li>
<li><p>Focus on constructive collaboration</p></li>
<li><p>Maintain professional communication</p></li>
</ul>
<p><strong>Expected Behavior</strong>:</p>
<ul class="simple">
<li><p>Use inclusive language</p></li>
<li><p>Respect differing viewpoints</p></li>
<li><p>Accept constructive criticism gracefully</p></li>
<li><p>Focus on what’s best for the community</p></li>
</ul>
<p><strong>Reporting Issues</strong>:</p>
<p>Report unacceptable behavior to project maintainers. All complaints will be reviewed and investigated promptly and fairly.</p>
</section>
<section id="getting-help">
<h3>Getting Help<a class="headerlink" href="#getting-help" title="Link to this heading"></a></h3>
<p><strong>Resources for Contributors</strong>:</p>
<ul class="simple">
<li><p><strong>Documentation</strong>: Comprehensive guides and API reference</p></li>
<li><p><strong>Issues</strong>: GitHub Issues for questions and bug reports</p></li>
<li><p><strong>Discussions</strong>: GitHub Discussions for general questions</p></li>
<li><p><strong>Code Review</strong>: Learn from feedback on pull requests</p></li>
</ul>
<p><strong>Mentoring</strong>:</p>
<p>New contributors are welcome! Maintainers are available to help with:</p>
<ul class="simple">
<li><p>Understanding the codebase</p></li>
<li><p>Identifying good first issues</p></li>
<li><p>Code review and feedback</p></li>
<li><p>Best practices and conventions</p></li>
</ul>
</section>
</section>
<section id="thank-you">
<h2>Thank You<a class="headerlink" href="#thank-you" title="Link to this heading"></a></h2>
<p>We appreciate all contributions to the homodyne package! Whether you’re reporting bugs, improving documentation, or adding new features, your contributions help make this package better for the entire XPCS community.</p>
<p><strong>Recognition</strong>:</p>
<p>Contributors are acknowledged in:</p>
<ul class="simple">
<li><p>Release notes for their contributions</p></li>
<li><p>Documentation credits</p></li>
<li><p>Project README contributors section</p></li>
</ul>
<p>Together, we’re building powerful tools for advancing X-ray photon correlation spectroscopy research!</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="migration_guide.html" class="btn btn-neutral float-left" title="Migration Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Wei Chen, Hongrui He.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>