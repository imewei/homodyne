

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Validation &mdash; Homodyne Analysis 6.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=66ead900" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=54d05895"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="homodyne" href="api/modules.html" />
    <link rel="prev" title="Performance Optimization" href="performance.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980b9" >

          
          
          <a href="index.html" class="icon icon-home">
            Homodyne Analysis
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis_modes.html">Analysis Modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration System</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Topics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="optimization_methods.html">Optimization Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="scaling_optimization.html">Scaling Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Performance Optimization</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Validation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#validation-features">Validation Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#comprehensive-validation-plots">Comprehensive Validation Plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="#quality-indicators">Quality Indicators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#usage-methods">Usage Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#command-line-integration">Command Line Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-based-validation">Configuration-Based Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-api-usage">Python API Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#output-organization">Output Organization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#directory-structure">Directory Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#plot-types-and-interpretation">Plot Types and Interpretation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#d-correlation-heatmaps">2D Correlation Heatmaps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#diagonal-slices-g2-t-t">Diagonal Slices g₂(t,t)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cross-sectional-profiles">Cross-Sectional Profiles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#statistical-summary-plots">Statistical Summary Plots</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-quality-assessment">Data Quality Assessment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#automated-quality-checks">Automated Quality Checks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#quality-reporting">Quality Reporting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting-data-issues">Troubleshooting Data Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#common-data-problems">Common Data Problems</a></li>
<li class="toctree-l3"><a class="reference internal" href="#resolution-strategies">Resolution Strategies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#integration-with-analysis-workflow">Integration with Analysis Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#workflow-recommendations">Workflow Recommendations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#automated-quality-gating">Automated Quality Gating</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#validation-workflow">Validation Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation-and-reporting">Documentation and Reporting</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">homodyne</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing and Quality Assurance</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration_guide.html">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980b9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Homodyne Analysis</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Data Validation</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="data-validation">
<h1>Data Validation<a class="headerlink" href="#data-validation" title="Link to this heading"></a></h1>
<p>Comprehensive data validation is crucial for reliable XPCS analysis. The homodyne package provides integrated experimental data validation tools with standalone plotting capabilities.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Data validation ensures:</p>
<ul class="simple">
<li><p><strong>Data Quality Assessment</strong>: Verify experimental data meets analysis requirements</p></li>
<li><p><strong>Early Problem Detection</strong>: Identify issues before time-intensive analysis</p></li>
<li><p><strong>Visual Diagnostics</strong>: Generate comprehensive validation plots</p></li>
<li><p><strong>Quality Metrics</strong>: Quantitative measures of data suitability</p></li>
</ul>
</section>
<section id="validation-features">
<h2>Validation Features<a class="headerlink" href="#validation-features" title="Link to this heading"></a></h2>
<section id="comprehensive-validation-plots">
<h3>Comprehensive Validation Plots<a class="headerlink" href="#comprehensive-validation-plots" title="Link to this heading"></a></h3>
<p>The validation system generates multiple diagnostic visualizations:</p>
<ul class="simple">
<li><p><strong>Full 2D correlation function heatmaps</strong> g₂(t₁,t₂) for each angle</p></li>
<li><p><strong>Diagonal slices</strong> g₂(t,t) showing temporal decay</p></li>
<li><p><strong>Cross-sectional profiles</strong> at different time points</p></li>
<li><p><strong>Statistical summaries</strong> with data quality metrics</p></li>
</ul>
</section>
<section id="quality-indicators">
<h3>Quality Indicators<a class="headerlink" href="#quality-indicators" title="Link to this heading"></a></h3>
<p><strong>Expected Characteristics for Good Data</strong>:</p>
<ul class="simple">
<li><p><strong>Mean values</strong> around 1.0 (expected for g₂ correlation functions)</p></li>
<li><p><strong>Enhanced diagonal values</strong> (should be higher than off-diagonal)</p></li>
<li><p><strong>Sufficient contrast</strong> (&gt; 0.001) indicating dynamic signal</p></li>
<li><p><strong>Consistent structure</strong> across different angles</p></li>
<li><p><strong>Appropriate noise levels</strong> for meaningful analysis</p></li>
</ul>
</section>
</section>
<section id="usage-methods">
<h2>Usage Methods<a class="headerlink" href="#usage-methods" title="Link to this heading"></a></h2>
<section id="command-line-integration">
<h3>Command Line Integration<a class="headerlink" href="#command-line-integration" title="Link to this heading"></a></h3>
<p><strong>Basic Data Validation</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generate data validation plots only</span>
python<span class="w"> </span>run_homodyne.py<span class="w"> </span>--plot-experimental-data<span class="w"> </span>--config<span class="w"> </span>my_config.json

<span class="c1"># Verbose validation with debug logging</span>
python<span class="w"> </span>run_homodyne.py<span class="w"> </span>--plot-experimental-data<span class="w"> </span>--config<span class="w"> </span>my_config.json<span class="w"> </span>--verbose
</pre></div>
</div>
<p><strong>Combined Validation and Analysis</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Validate data and perform analysis</span>
python<span class="w"> </span>run_homodyne.py<span class="w"> </span>--plot-experimental-data<span class="w"> </span>--method<span class="w"> </span>all<span class="w"> </span>--verbose

<span class="c1"># Mode-specific validation</span>
python<span class="w"> </span>run_homodyne.py<span class="w"> </span>--plot-experimental-data<span class="w"> </span>--static-isotropic<span class="w"> </span>--method<span class="w"> </span>classical
</pre></div>
</div>
</section>
<section id="configuration-based-validation">
<h3>Configuration-Based Validation<a class="headerlink" href="#configuration-based-validation" title="Link to this heading"></a></h3>
<p>Enable automatic validation through configuration:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;workflow_integration&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;analysis_workflow&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;plot_experimental_data_on_load&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;validate_data_quality&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;save_validation_plots&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Configuration Options</strong>:
- <strong>plot_experimental_data_on_load</strong>: Automatically generate plots when loading data
- <strong>validate_data_quality</strong>: Perform quantitative quality checks
- <strong>save_validation_plots</strong>: Save plots to disk for later review</p>
</section>
<section id="python-api-usage">
<h3>Python API Usage<a class="headerlink" href="#python-api-usage" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">homodyne</span><span class="w"> </span><span class="kn">import</span> <span class="n">HomodyneAnalysisCore</span><span class="p">,</span> <span class="n">ConfigManager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">homodyne.plotting</span><span class="w"> </span><span class="kn">import</span> <span class="n">plot_experimental_data_validation</span>

<span class="c1"># Load configuration and data</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">ConfigManager</span><span class="p">(</span><span class="s2">&quot;my_config.json&quot;</span><span class="p">)</span>
<span class="n">analysis</span> <span class="o">=</span> <span class="n">HomodyneAnalysisCore</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

<span class="c1"># Generate validation plots</span>
<span class="n">plot_experimental_data_validation</span><span class="p">(</span>
    <span class="n">config</span><span class="p">,</span>
    <span class="n">output_directory</span><span class="o">=</span><span class="s2">&quot;./plots/validation&quot;</span><span class="p">,</span>
    <span class="n">show_plots</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">save_plots</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="output-organization">
<h2>Output Organization<a class="headerlink" href="#output-organization" title="Link to this heading"></a></h2>
<section id="directory-structure">
<h3>Directory Structure<a class="headerlink" href="#directory-structure" title="Link to this heading"></a></h3>
<p>Validation plots are organized in a clear directory structure:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>plots/
└── data_validation/
    ├── correlation_heatmaps/
    │   ├── angle_000_heatmap.png
    │   ├── angle_001_heatmap.png
    │   └── ...
    ├── diagonal_slices/
    │   ├── diagonal_comparison.png
    │   └── decay_profiles.png
    ├── cross_sections/
    │   ├── t1_sections.png
    │   └── t2_sections.png
    └── summary_statistics.png
</pre></div>
</div>
</section>
</section>
<section id="plot-types-and-interpretation">
<h2>Plot Types and Interpretation<a class="headerlink" href="#plot-types-and-interpretation" title="Link to this heading"></a></h2>
<section id="d-correlation-heatmaps">
<h3>2D Correlation Heatmaps<a class="headerlink" href="#d-correlation-heatmaps" title="Link to this heading"></a></h3>
<p><strong>Purpose</strong>: Visualize the full g₂(t₁,t₂) correlation matrix for each angle</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Typical heatmap characteristics</span>
<span class="c1"># - Enhanced diagonal (g₂(t,t) &gt; g₂(t₁,t₂) for t₁ ≠ t₂)</span>
<span class="c1"># - Smooth decay away from diagonal</span>
<span class="c1"># - Consistent structure across angles</span>
</pre></div>
</div>
<p><strong>Quality Indicators</strong>:
- <strong>Enhanced diagonal</strong>: Clear enhancement along t₁ = t₂
- <strong>Smooth structure</strong>: No abrupt discontinuities or artifacts
- <strong>Appropriate contrast</strong>: Visible difference between diagonal and off-diagonal
- <strong>Angular consistency</strong>: Similar overall structure across different angles</p>
<p><strong>Common Issues</strong>:
- <strong>Flat correlation</strong>: No diagonal enhancement (poor dynamics)
- <strong>Excessive noise</strong>: Random fluctuations dominating structure
- <strong>Systematic artifacts</strong>: Regular patterns indicating instrumental issues</p>
</section>
<section id="diagonal-slices-g2-t-t">
<h3>Diagonal Slices g₂(t,t)<a class="headerlink" href="#diagonal-slices-g2-t-t" title="Link to this heading"></a></h3>
<p><strong>Purpose</strong>: Show temporal decay characteristics along the diagonal</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Expected diagonal behavior</span>
<span class="c1"># g₂(0) &gt; 1 (intercept enhancement)</span>
<span class="c1"># Smooth decay with increasing lag time</span>
<span class="c1"># Plateau at long times near unity</span>
</pre></div>
</div>
<p><strong>Quality Indicators</strong>:
- <strong>Intercept value</strong>: g₂(0) should be &gt; 1 for dynamic systems
- <strong>Smooth decay</strong>: Monotonic decrease without oscillations
- <strong>Appropriate time range</strong>: Decay spans available time window
- <strong>Long-time plateau</strong>: Approaches baseline value at long times</p>
<p><strong>Problematic Patterns</strong>:
- <strong>No intercept enhancement</strong>: g₂(0) ≈ 1 indicates no dynamics
- <strong>Oscillatory decay</strong>: May indicate aliasing or systematic errors
- <strong>No plateau</strong>: Insufficient time range or poor statistics</p>
</section>
<section id="cross-sectional-profiles">
<h3>Cross-Sectional Profiles<a class="headerlink" href="#cross-sectional-profiles" title="Link to this heading"></a></h3>
<p><strong>Purpose</strong>: Examine correlation behavior at fixed time points</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cross-sections at different t₁ values</span>
<span class="c1"># Show how correlation evolves with t₂</span>
<span class="c1"># Reveal time-dependent behavior</span>
</pre></div>
</div>
<p><strong>Analysis Points</strong>:
- <strong>Peak positions</strong>: Should align with diagonal
- <strong>Peak widths</strong>: Related to correlation time scales
- <strong>Baseline levels</strong>: Off-diagonal correlation values
- <strong>Symmetry</strong>: g₂(t₁,t₂) = g₂(t₂,t₁) for stationary processes</p>
</section>
<section id="statistical-summary-plots">
<h3>Statistical Summary Plots<a class="headerlink" href="#statistical-summary-plots" title="Link to this heading"></a></h3>
<p><strong>Purpose</strong>: Quantitative quality metrics and statistics</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Key statistics displayed:</span>
<span class="c1"># - Mean correlation values</span>
<span class="c1"># - Standard deviations</span>
<span class="c1"># - Dynamic range and contrast</span>
<span class="c1"># - Signal-to-noise estimates</span>
</pre></div>
</div>
<p><strong>Quality Metrics</strong>:
- <strong>Mean values</strong>: Should be near 1.0 for normalized data
- <strong>Contrast</strong>: (max - min) / mean should be &gt; 0.001
- <strong>Signal-to-noise</strong>: Ratio of signal to statistical fluctuations
- <strong>Coverage</strong>: Fraction of data points with adequate statistics</p>
</section>
</section>
<section id="data-quality-assessment">
<h2>Data Quality Assessment<a class="headerlink" href="#data-quality-assessment" title="Link to this heading"></a></h2>
<section id="automated-quality-checks">
<h3>Automated Quality Checks<a class="headerlink" href="#automated-quality-checks" title="Link to this heading"></a></h3>
<p>The validation system performs automated quality assessment:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">assess_data_quality</span><span class="p">(</span><span class="n">correlation_data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Automated data quality assessment.&quot;&quot;&quot;</span>

    <span class="c1"># Calculate key metrics</span>
    <span class="n">mean_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">correlation_data</span><span class="p">)</span>
    <span class="n">diagonal_enhancement</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">correlation_data</span><span class="p">))</span> <span class="o">-</span> <span class="n">mean_value</span>
    <span class="n">contrast</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">correlation_data</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">correlation_data</span><span class="p">))</span> <span class="o">/</span> <span class="n">mean_value</span>

    <span class="c1"># Quality flags</span>
    <span class="n">quality_flags</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;mean_near_unity&#39;</span><span class="p">:</span> <span class="mf">0.8</span> <span class="o">&lt;=</span> <span class="n">mean_value</span> <span class="o">&lt;=</span> <span class="mf">1.2</span><span class="p">,</span>
        <span class="s1">&#39;diagonal_enhanced&#39;</span><span class="p">:</span> <span class="n">diagonal_enhancement</span> <span class="o">&gt;</span> <span class="mf">0.001</span><span class="p">,</span>
        <span class="s1">&#39;sufficient_contrast&#39;</span><span class="p">:</span> <span class="n">contrast</span> <span class="o">&gt;</span> <span class="mf">0.001</span><span class="p">,</span>
        <span class="s1">&#39;no_negative_values&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">correlation_data</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">quality_flags</span>
</pre></div>
</div>
<p><strong>Quality Criteria</strong>:
- <strong>Mean near unity</strong>: 0.8 ≤ mean(g₂) ≤ 1.2
- <strong>Diagonal enhancement</strong>: mean(diag(g₂)) - mean(g₂) &gt; 0.001
- <strong>Sufficient contrast</strong>: (max - min)/mean &gt; 0.001
- <strong>Non-negative values</strong>: All correlation values ≥ 0</p>
</section>
<section id="quality-reporting">
<h3>Quality Reporting<a class="headerlink" href="#quality-reporting" title="Link to this heading"></a></h3>
<p>Generate comprehensive quality reports:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>========================================
EXPERIMENTAL DATA VALIDATION REPORT
========================================

Dataset: protein_sample_01.h5
Analysis Date: 2024-01-15 10:30:00

OVERALL QUALITY: GOOD ✓

Quality Metrics:
├── Mean g₂ value: 1.003 ✓
├── Diagonal enhancement: 0.045 ✓
├── Contrast ratio: 0.043 ✓
├── Signal-to-noise: 15.2 ✓
└── Data coverage: 98.5% ✓

Angular Analysis:
├── Number of angles: 128
├── Angle range: 0° - 180°
├── Consistent quality: 96% of angles pass QC ✓
└── Recommended angles: 0°-15°, 165°-180°
</pre></div>
</div>
</section>
</section>
<section id="troubleshooting-data-issues">
<h2>Troubleshooting Data Issues<a class="headerlink" href="#troubleshooting-data-issues" title="Link to this heading"></a></h2>
<section id="common-data-problems">
<h3>Common Data Problems<a class="headerlink" href="#common-data-problems" title="Link to this heading"></a></h3>
<p><strong>Poor Signal Quality</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Symptoms:
- Low diagonal enhancement (&lt; 0.001)
- High noise levels
- Inconsistent structure across angles

Possible Causes:
- Insufficient measurement time
- Poor sample preparation
- Instrumental instability
- Inadequate signal-to-noise ratio
</pre></div>
</div>
<p><strong>Systematic Artifacts</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Symptoms:
- Regular patterns in heatmaps
- Unexpected correlations
- Angular inconsistencies

Possible Causes:
- Detector artifacts
- Beam instability
- Sample environment issues
- Data processing errors
</pre></div>
</div>
<p><strong>Normalization Issues</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Symptoms:
- Mean values far from unity
- Negative correlation values
- Unrealistic scaling

Possible Causes:
- Incorrect dark current subtraction
- Improper flat field correction
- Background subtraction errors
- Calibration problems
</pre></div>
</div>
</section>
<section id="resolution-strategies">
<h3>Resolution Strategies<a class="headerlink" href="#resolution-strategies" title="Link to this heading"></a></h3>
<p><strong>Data Quality Improvement</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Increase measurement time</strong> for better statistics</p></li>
<li><p><strong>Improve sample stability</strong> and environmental control</p></li>
<li><p><strong>Check instrumental calibration</strong> and alignment</p></li>
<li><p><strong>Verify data processing pipeline</strong> for systematic errors</p></li>
</ol>
<p><strong>Analysis Adaptations</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Use angle filtering</strong> to focus on high-quality angular ranges</p></li>
<li><p><strong>Adjust time windows</strong> to exclude problematic regions</p></li>
<li><p><strong>Apply additional smoothing</strong> for noisy data</p></li>
<li><p><strong>Consider simpler analysis modes</strong> for marginal data quality</p></li>
</ol>
<p><strong>Configuration Adjustments</strong>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;data_preprocessing&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;apply_smoothing&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;smoothing_window&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;outlier_removal&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;outlier_threshold&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.0</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;analysis_settings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;enable_angle_filtering&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;angle_filter_ranges&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="mi">-5</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mi">175</span><span class="p">,</span><span class="w"> </span><span class="mi">185</span><span class="p">]]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="integration-with-analysis-workflow">
<h2>Integration with Analysis Workflow<a class="headerlink" href="#integration-with-analysis-workflow" title="Link to this heading"></a></h2>
<section id="workflow-recommendations">
<h3>Workflow Recommendations<a class="headerlink" href="#workflow-recommendations" title="Link to this heading"></a></h3>
<p><strong>Standard Workflow</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Data Validation</strong>: Always validate data before analysis</p></li>
<li><p><strong>Quality Assessment</strong>: Review validation plots and metrics</p></li>
<li><p><strong>Parameter Adjustment</strong>: Modify analysis parameters based on data quality</p></li>
<li><p><strong>Analysis Execution</strong>: Proceed with appropriate analysis mode</p></li>
<li><p><strong>Result Validation</strong>: Cross-check results with data quality assessment</p></li>
</ol>
<p><strong>Quality-Based Mode Selection</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">select_analysis_mode_based_on_quality</span><span class="p">(</span><span class="n">quality_metrics</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Recommend analysis mode based on data quality.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">quality_metrics</span><span class="p">[</span><span class="s1">&#39;contrast&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.005</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;static_isotropic&quot;</span>  <span class="c1"># Fastest for marginal data</span>
    <span class="k">elif</span> <span class="n">quality_metrics</span><span class="p">[</span><span class="s1">&#39;angular_consistency&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.8</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;static_isotropic&quot;</span>  <span class="c1"># Avoid angular complications</span>
    <span class="k">elif</span> <span class="n">quality_metrics</span><span class="p">[</span><span class="s1">&#39;signal_to_noise&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;laminar_flow&quot;</span>      <span class="c1"># Full analysis for high-quality data</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;static_anisotropic&quot;</span>  <span class="c1"># Balanced approach</span>
</pre></div>
</div>
</section>
<section id="automated-quality-gating">
<h3>Automated Quality Gating<a class="headerlink" href="#automated-quality-gating" title="Link to this heading"></a></h3>
<p>Implement quality gates to prevent analysis of poor data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">quality_gate_check</span><span class="p">(</span><span class="n">data_validation_results</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if data meets minimum quality standards.&quot;&quot;&quot;</span>

    <span class="n">min_requirements</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;mean_value&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">),</span>
        <span class="s1">&#39;contrast&#39;</span><span class="p">:</span> <span class="mf">0.001</span><span class="p">,</span>
        <span class="s1">&#39;diagonal_enhancement&#39;</span><span class="p">:</span> <span class="mf">0.001</span><span class="p">,</span>
        <span class="s1">&#39;coverage&#39;</span><span class="p">:</span> <span class="mf">0.95</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="n">metric</span><span class="p">,</span> <span class="n">requirement</span> <span class="ow">in</span> <span class="n">min_requirements</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">meets_requirement</span><span class="p">(</span><span class="n">data_validation_results</span><span class="p">[</span><span class="n">metric</span><span class="p">],</span> <span class="n">requirement</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">DataQualityError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data fails </span><span class="si">{</span><span class="n">metric</span><span class="si">}</span><span class="s2"> requirement&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
</section>
<section id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading"></a></h2>
<section id="validation-workflow">
<h3>Validation Workflow<a class="headerlink" href="#validation-workflow" title="Link to this heading"></a></h3>
<p><strong>Always validate first</strong>:
- Generate validation plots before investing time in analysis
- Use validation results to guide analysis parameter selection
- Document data quality issues for reproducibility</p>
<p><strong>Regular monitoring</strong>:
- Compare validation results across different datasets
- Track data quality trends over time
- Maintain quality standards for consistent results</p>
<p><strong>Integration with analysis</strong>:
- Use validation results to optimize analysis parameters
- Adjust computational resources based on data complexity
- Select appropriate analysis modes based on data quality</p>
</section>
<section id="documentation-and-reporting">
<h3>Documentation and Reporting<a class="headerlink" href="#documentation-and-reporting" title="Link to this heading"></a></h3>
<p><strong>Include validation in reports</strong>:
- Document data quality assessment results
- Include key validation plots in publications
- Report any data quality limitations</p>
<p><strong>Maintain validation records</strong>:
- Save validation plots and reports
- Track data quality metrics over time
- Use for method development and troubleshooting</p>
<p>This comprehensive data validation framework ensures reliable and robust XPCS analysis results.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="performance.html" class="btn btn-neutral float-left" title="Performance Optimization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api/modules.html" class="btn btn-neutral float-right" title="homodyne" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Wei Chen, Hongrui He.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>